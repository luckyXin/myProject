<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap 
    PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="tractProject">

	<!-- 查詢跟踪项目总数 -->
	<select id="findTractProjectAllCount" parameterClass="com.audit.entity.project.TractAuditProjectInfo"
		resultClass="java.lang.Integer">
		SELECT COUNT(1) FROM dbo.pro_tractProjectAudit
		WHERE 1=1
		<isNotEmpty property="projectName">
			AND projectName like '%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="submitState" compareValue="0">
			AND submitState =
			#submitState#
		</isEqual>
		<isEqual property="submitState" compareValue="1">
			AND submitState =
			#submitState#
		</isEqual>
	</select>

	<!-- 查询跟踪项目信息 -->
	<select id="findTractProject" parameterClass="com.audit.entity.project.TractAuditProjectInfo"
		resultClass="com.audit.entity.project.TractAuditProjectInfo">
		SELECT TOP $pagesize$
		t1.id,
		t1.projectName,
		t1.ownerId,
		t2.ownerName,
		t1.projectType,
		t1.jianSheGuiMo,
		t1.jianSheShiJian,
		SUBSTRING(CONVERT(varchar, t1.projectCreateTime, 120),0,12) as projectCreateTime,
		t1.projectCreateNo,
		t1.projectCreateFile,
		t1.remark,
		t1.createUserAccount,
		t1.updateTime,
		t1.isQingBiao,
		t1.submitState,
		t1.sentAuditMoney
		FROM dbo.pro_tractProjectAudit t1
		LEFT
		JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		WHERE t1.id not in (
		SELECT TOP($pagesize$*($pageno$ - 1)) t1.id FROM
		dbo.pro_tractProjectAudit t1
		LEFT JOIN dbo.sys_projectowner t2
		ON
		t1.ownerId = t2.id
		WHERE 1=1
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND t1.ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="submitState" compareValue="0">
			AND
			t1.submitState =
			#submitState#
		</isEqual>
		<isEqual property="submitState" compareValue="1">
			AND
			t1.submitState =
			#submitState#
		</isEqual>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by id desc
	    </isEmpty>
		)
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND t1.ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="submitState" compareValue="0">
			AND
			t1.submitState =
			#submitState#
		</isEqual>
		<isEqual property="submitState" compareValue="1">
			AND
			t1.submitState =
			#submitState#
		</isEqual>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by id desc
	    </isEmpty>
	</select>

	<!-- 获取跟踪审计项目最大ID -->
	<select id="getTractProjectMaxId" resultClass="java.lang.Integer">
		SELECT
		MAX(SUBSTRING
		(id,3,len(id))) FROM dbo.pro_tractProjectAudit
	</select>

	<!-- 插入跟踪审计项目 -->
	<insert id="insertTractProject" parameterClass="com.audit.entity.project.TractAuditProjectInfo">
		INSERT INTO
		dbo.pro_tractProjectAudit
		(id
		,projectName
		,ownerId
		,projectType
		,jianSheGuiMo
		<isNotEmpty property="jianSheShiJian">
		,jianSheShiJian
		</isNotEmpty>
		<isNotEmpty property="projectCreateTime">
		,projectCreateTime
		</isNotEmpty>
		,projectCreateNo
		,remark
		,createUserAccount
		,updateTime
		,isQingBiao
		,submitState
		,sentAuditMoney
		,ownerLinker
		,ownerTelPhone
		,budgetMoney
		,directMoney
		,budgetCode
		,projectNo)
		VALUES
		(#id#
		,#projectName#
		,#ownerId#
		,#projectType#
		,#jianSheGuiMo#
		<isNotEmpty property="jianSheShiJian">
		,#jianSheShiJian#
		</isNotEmpty>
		<isNotEmpty property="projectCreateTime">
		,#projectCreateTime#
		</isNotEmpty>
		,#projectCreateNo#
		,#remark#
		,#createUserAccount#
		,getDate()
		,'0'
		,#submitState#
		,#sentAuditMoney#
		,#ownerLinker#
		,#ownerTelPhone#
		,#budgetMoney#
		,#directMoney#
		,#budgetCode#
		,#projectNumber#)
	</insert>

	<!-- 更新跟踪审计项目 -->
	<update id="updateTractProject" parameterClass="com.audit.entity.project.TractAuditProjectInfo">
		UPDATE
		dbo.pro_tractProjectAudit
		SET
		projectName = #projectName#
		,ownerId = #ownerId#
		,projectType = #projectType#
		,jianSheGuiMo = #jianSheGuiMo#
		<isNotEmpty property="jianSheShiJian">
		,jianSheShiJian = #jianSheShiJian#
		</isNotEmpty>
		<isNotEmpty property="projectCreateTime">
		,projectCreateTime = #projectCreateTime#
		</isNotEmpty>
		,projectCreateNo = #projectCreateNo#
		,projectCreateFile = #projectCreateFile#
		,remark = #remark#
		,updateTime = getDate()
		,isQingBiao = #isQingBiao#
		,submitState = #submitState#
		,sentAuditMoney = #sentAuditMoney#
		,ownerLinker = #ownerLinker#
		,ownerTelPhone = #ownerTelPhone#
		,budgetMoney = #budgetMoney#
		,directMoney = #directMoney#
		,budgetCode = #budgetCode#
		,projectNo = #projectNumber#
		WHERE id = #id#
	</update>

	<!-- 通过ID 获取跟踪审计项目信息 -->
	<select id="getTractProjectInfoById" parameterClass="java.lang.String"
		resultClass="com.audit.entity.project.TractAuditProjectInfo">
		SELECT
		t.id
		,t.projectName
		,t.ownerId
		,t.projectType
		,t.jianSheGuiMo
		,t.jianSheShiJian
		,t.projectCreateTime
		,t.projectCreateNo
		,t.remark
		,t.createUserAccount
		,t.updateTime
		,t.isQingBiao
		,t.submitState
		,t.sentAuditMoney
		,t.ownerLinker
		,t.ownerTelPhone
		,t1.ownerName
		,t.budgetMoney
		,t.directMoney
		,t.budgetCode
		,t.projectNo as projectNumber
		FROM dbo.pro_tractProjectAudit t
		LEFT JOIN
		dbo.sys_projectowner t1
		ON t1.id = t.ownerId
		WHERE t.id = #id#
	</select>

	<!-- 标段信息总数查询 -->
	<select id="findTractProjectBiaoDuanAllCount" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo"
		resultClass="java.lang.Integer">
		SELECT COUNT(1) FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN
		dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		WHERE 1=1
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="isArrange" compareValue="0">
			AND t.isArrange =
			#isArrange#
		</isEqual>
		<isEqual property="isArrange" compareValue="1">
			AND t.isArrange =
			#isArrange#
		</isEqual>
	</select>

	<select id="findTractProjectBiaoDuan" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo"
		resultClass="com.audit.entity.project.ProejctBiaoDuanInfo">
		SELECT TOP $pagesize$
		t.id,
		t.projectId,
		t.biaoDuanName,
		t.projectGaiKuang,
		t.supervisorUtil,
		t.buildManageUtil,
		t.prospectUtil,
		t.buildUtil,
		t.designUtil,
		t.constructUtil,
		t.preAuditMoney,
		t.zhongBiaoMoney,
		t.reallyStartTime,
		t.buildContent,
		t.isArrange,
		t1.projectName,
		t2.ownerName,
		t3.isPay
		FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN
		dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		LEFT JOIN
		dbo.pro_tractProjectArrange t3
		ON t3.biaoDuanId = t.Id
		WHERE
		t.id not in (
		SELECT
		TOP($pagesize$*($pageno$ - 1))
		t.id
		FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		WHERE 1=1
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="isArrange" compareValue="0">
			AND t.isArrange =
			#isArrange#
		</isEqual>
		<isEqual property="isArrange" compareValue="1">
			AND t.isArrange =
			#isArrange#
		</isEqual>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by t.id desc
	    </isEmpty>
		)
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="isArrange" compareValue="0">
			AND t.isArrange =
			#isArrange#
		</isEqual>
		<isEqual property="isArrange" compareValue="1">
			AND t.isArrange =
			#isArrange#
		</isEqual>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by t.id desc
	    </isEmpty>
	</select>
	
	
	<!-- 清标查询已安排标段 -->
	<select id="findTractProjectBiaoDuanqingbiao" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo"
		resultClass="com.audit.entity.project.ProejctBiaoDuanInfo">
		SELECT TOP $pagesize$
		t.id,
		t.projectId,
		t.biaoDuanName,
		t.projectGaiKuang,
		t.supervisorUtil,
		t.buildManageUtil,
		t.prospectUtil,
		t.buildUtil,
		t.designUtil,
		t.constructUtil,
		t.preAuditMoney,
		t.zhongBiaoMoney,
		t.reallyStartTime,
		t.buildContent,
		t.qingBiaoState,
		t.isArrange,
		t1.projectName,
		t2.ownerName,
		t3.isPay
		FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN
		dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		LEFT JOIN
		dbo.pro_tractProjectArrange t3
		ON t3.biaoDuanId = t.Id
		LEFT JOIN 
		pro_employeeArrangeRelate t4
		on t4.projectArrangeId=t3.Id
		WHERE
		t.isArrange='1'
		and
		t4.governmentEmployeeId=#bduserid#
		and
		t.id not in (
		SELECT
		TOP($pagesize$*($pageno$ - 1))
		t.id
		FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		LEFT JOIN
		dbo.pro_tractProjectArrange t3
		ON t3.biaoDuanId = t.Id
		LEFT JOIN 
		pro_employeeArrangeRelate t4
		on t4.projectArrangeId=t3.Id
		WHERE 1=1 and 
		t.isArrange='1'
		and
		t4.governmentEmployeeId=#bduserid# 
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="qingBiaoState" compareValue="0">
			AND t.qingBiaoState =
			#qingBiaoState#
		</isEqual>
		<isEqual property="qingBiaoState" compareValue="1">
			AND t.qingBiaoState =
			#qingBiaoState#
		</isEqual>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by t.id desc
	    </isEmpty>
		)
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="qingBiaoState" compareValue="0">
			AND t.qingBiaoState =
			#qingBiaoState#
		</isEqual>
		<isEqual property="qingBiaoState" compareValue="1">
			AND t.qingBiaoState =
			#qingBiaoState#
		</isEqual>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by t.id desc
	    </isEmpty>
	</select>
	
	
	<select id="findTractProjectBiaoDuanqingbiaoAllCount" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo"
		resultClass="java.lang.Integer">
		SELECT COUNT(1) FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN
		dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		LEFT JOIN
		dbo.pro_tractProjectArrange t3
		ON t3.biaoDuanId = t.Id
		LEFT JOIN 
		pro_employeeArrangeRelate t4
		on t4.projectArrangeId=t3.Id
		WHERE 1=1 and 
		t.isArrange='1'
		and
		t4.governmentEmployeeId=#bduserid# 
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<isEqual property="qingBiaoState" compareValue="0">
			AND t.qingBiaoState =
			#qingBiaoState#
		</isEqual>
		<isEqual property="qingBiaoState" compareValue="1">
			AND t.qingBiaoState =
			#qingBiaoState#
		</isEqual>
	</select>
	
	
	
	<!-- 合同审核条款查询已安排标段 和清标-->
	<select id="findTractProjectBiaoDuanhtaudit" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo"
		resultClass="com.audit.entity.project.ProejctBiaoDuanInfo">
		SELECT TOP $pagesize$
		t.id,
		t.projectId,
		t.biaoDuanName,
		t.projectGaiKuang,
		t.supervisorUtil,
		t.buildManageUtil,
		t.prospectUtil,
		t.buildUtil,
		t.designUtil,
		t.constructUtil,
		t.preAuditMoney,
		t.zhongBiaoMoney,
		t.reallyStartTime,
		t.buildContent,
		t.qingBiaoState,
		t.isArrange,
		t1.projectName,
		t2.ownerName,
		t3.isPay
		FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN
		dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		LEFT JOIN
		dbo.pro_tractProjectArrange t3
		ON t3.biaoDuanId = t.Id
		LEFT JOIN 
		pro_employeeArrangeRelate t4
		on t4.projectArrangeId=t3.Id
		WHERE
		t.isArrange='1'
		and  (t.qingBiaoState ='1' or t1.projectType='1')
		and
		t4.governmentEmployeeId=#bduserid#
		and
		t.id not in (
		SELECT
		TOP($pagesize$*($pageno$ - 1))
		t.id
		FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		LEFT JOIN
		dbo.pro_tractProjectArrange t3
		ON t3.biaoDuanId = t.Id
		LEFT JOIN 
		pro_employeeArrangeRelate t4
		on t4.projectArrangeId=t3.Id
		WHERE 1=1 and 
		t.isArrange='1'
		and  (t.qingBiaoState ='1' or t1.projectType='1')
		and
		t4.governmentEmployeeId=#bduserid# 
		AND t.qingBiaoState ='1'
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by t.id desc
	    </isEmpty>
		)
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
		<dynamic prepend="order by">
			<isNotEmpty property="filed">
				$filed$ $sort$
             </isNotEmpty>
		</dynamic>
		<isEmpty property="filed">
			order by t.id desc
	    </isEmpty>
	</select>
	
	
	<select id="findTractProjectBiaoDuanhtauditAllCount" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo"
		resultClass="java.lang.Integer">
		SELECT COUNT(1) FROM dbo.pro_tractBiaoDuanCreate t
		LEFT JOIN
		dbo.pro_tractProjectAudit t1
		ON t.projectId = t1.id
		LEFT JOIN
		dbo.sys_projectowner t2
		ON t1.ownerId = t2.id
		LEFT JOIN
		dbo.pro_tractProjectArrange t3
		ON t3.biaoDuanId = t.Id
		LEFT JOIN 
		pro_employeeArrangeRelate t4
		on t4.projectArrangeId=t3.Id
		WHERE 1=1 and 
		t.isArrange='1'
		and  (t.qingBiaoState ='1' or t1.projectType='1')
		and
		t4.governmentEmployeeId=#bduserid# 
		<isNotEmpty property="projectId">
			AND t.projectId = #projectId#
		</isNotEmpty>
		<isNotEmpty property="projectName">
			AND t1.projectName like
			'%$projectName$%'
		</isNotEmpty>
		<isNotEmpty property="ownerId">
			AND ownerId = #ownerId#
		</isNotEmpty>
	</select>

	<!-- 插入标段信息 -->
	<insert id="insertTractProjectBiaoDuan" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo">
		INSERT
		INTO dbo.pro_tractBiaoDuanCreate
		(id
		,projectId
		,biaoDuanName
		,projectGaiKuang
		,supervisorUtil
		,buildManageUtil
		,prospectUtil
		,buildUtil
		,designUtil
		,constructUtil
		,preAuditMoney
		,zhongBiaoMoney
		<isNotEmpty property="reallyStartTime">
		,reallyStartTime
		</isNotEmpty>
		,buildContent
		,isArrange
		,createTime
		,updateTime
		,createUserAccount
		,preAuditObligateMoney
		,zhongBiaoObligateMoney)
		VALUES
		(#id#
		,#projectId#
		,#biaoDuanName#
		,#projectGaiKuang#
		,#supervisorUtil#
		,#buildManageUtil#
		,#prospectUtil#
		,#buildUtil#
		,#designUtil#
		,#constructUtil#
		,#preAuditMoney#
		,#zhongBiaoMoney#
		<isNotEmpty property="reallyStartTime">
		,#reallyStartTime#
		</isNotEmpty>
		,#buildContent#
		,'0'
		,getDate()
		,getDate()
		,#userAccount#
		,#preAuditObligateMoney#
		,#zhongBiaoObligateMoney#)
	</insert>

	<!-- 更新跟踪审计项目 -->
	<update id="updateTractProjectBiaoDuan" parameterClass="com.audit.entity.project.ProejctBiaoDuanInfo">
		UPDATE
		dbo.pro_tractBiaoDuanCreate
		SET
		biaoDuanName = #biaoDuanName#
		,projectGaiKuang = #projectGaiKuang#
		,supervisorUtil = #supervisorUtil#
		,buildManageUtil = #buildManageUtil#
		,prospectUtil = #prospectUtil#
		,buildUtil = #buildUtil#
		,designUtil = #designUtil#
		,constructUtil =
		#constructUtil#
		,preAuditMoney = #preAuditMoney#
		,zhongBiaoMoney =
		#zhongBiaoMoney#
		<isNotEmpty property="reallyStartTime">
		,reallyStartTime = #reallyStartTime#
		</isNotEmpty>
		,buildContent =
		#buildContent#
		,updateTime = #updateTime#
		,preAuditObligateMoney = #preAuditObligateMoney#
		,zhongBiaoObligateMoney = #zhongBiaoObligateMoney#
		WHERE id = #id#
	</update>

	<!-- 获取标段的基本信息 -->
	<select id="getProejctBiaoDuanInfo" parameterClass="java.lang.String"
		resultClass="com.audit.entity.project.ProejctBiaoDuanInfo">
		SELECT id
		,projectId
		,biaoDuanName
		,projectGaiKuang
		,supervisorUtil
		,buildManageUtil
		,prospectUtil
		,buildUtil
		,designUtil
		,constructUtil
		,preAuditMoney
		,zhongBiaoMoney
		,reallyStartTime
		,buildContent
		,isArrange
		,createTime
		,updateTime
		,createUserAccount
		,preAuditObligateMoney
		,zhongBiaoObligateMoney
		FROM
		dbo.pro_tractBiaoDuanCreate
		WHERE id = #id#
	</select>
	
	<!-- 标段查询立项信息 -->
     <select id="selectProjectAuditbyId"  parameterClass="java.lang.String"
		resultClass="com.audit.entity.project.ProejctBiaoDuanInfo">
		select ownerId,projectType,projectCreateNo,sentAuditMoney,budgetCode,budgetMoney from pro_tractProjectAudit where id=#id#
	</select>	

	<!-- 获取跟踪项目下的所有标段ID -->
	<select id="getBiaoDuanIdsByProjectId" parameterClass="java.lang.String"
		resultClass="java.lang.String">
		SELECT id
		FROM dbo.pro_tractBiaoDuanCreate
		WHERE projectId =
		#projectId#
	</select>

	<!-- 删除标段信息通过跟踪项目ID -->
	<delete id="deleteBiaoDuanByProjectId" parameterClass="java.lang.String">
		DELETE
		FROM dbo.pro_tractBiaoDuanCreate
		WHERE projectId = #projectId#
	</delete>
	
	<!-- 删除标段信息通过ID -->
	<delete id="deleteBiaoDuanInfoById" parameterClass="java.lang.String">
		DELETE
		FROM dbo.pro_tractBiaoDuanCreate
		WHERE id = #id#
	</delete>
	
	<!-- 删除跟蹤審計項目 -->
	<delete id="deleteTractProjectById" parameterClass="java.lang.String">
		DELETE
		FROM dbo.pro_tractProjectAudit
		WHERE id = #id#
	</delete>
		
	<!-- 删除文件 -->
	<delete id="deleteBelongToFile" parameterClass="java.lang.String">
		DELETE
		FROM dbo.pro_fileBelongRelate
		WHERE belongToId = #belongToId#
	</delete>

	<!-- 通过标段名称获取标段ID -->
	<select id="getTractProjectBiaoDuanIdByName" parameterClass="java.lang.String"
		resultClass="java.lang.String">
		SELECT ID FROM dbo.pro_tractBiaoDuanCreate WHERE
		biaoDuanName = #biaoDuanName#
	</select>

	<!-- 判断项目名称是否存在 -->
	<select id="checkProjectNameIsExist" parameterClass="java.lang.String"
		resultClass="java.lang.Integer">
		SELECT COUNT(1) FROM dbo.pro_tractProjectAudit t WHERE t.projectName =
		#projectName#
	</select>

	<!-- 判断标段名称是否存在 -->
	<select id="checkBiaoDuanNameIsExist" parameterClass="java.lang.String"
		resultClass="java.lang.Integer">
		SELECT COUNT(1) FROM dbo.pro_tractBiaoDuanCreate t WHERE t.biaoDuanName =
		#biaoDuanName#
	</select>
</sqlMap>
