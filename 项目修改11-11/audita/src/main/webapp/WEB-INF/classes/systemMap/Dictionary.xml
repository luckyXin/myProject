<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap 
    PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="DictonaryObject">

   <typeAlias alias="dic" type="com.audit.entity.Dictionary"/>
      <!-- 查询对应类型下面相应的数据 -->
	  <select  id="selectdicbyid" parameterClass="java.lang.String"  resultClass="dic">
	       select id,dictionaryname,pid,issystem,remark from sys_dictionary 
           where pid=#id#
	  </select>
	  
	  <!-- 分页查询字典数据 -->
	  <select id="selectAllDicpage" parameterClass="dic" resultClass="dic">   
	     select * from sys_dictionary where 1=1 
	     <dynamic prepend="and">
             <isNotEmpty property="id">
                      (id=#id# or pid=#id#)
             </isNotEmpty>
         </dynamic>
	    <dynamic prepend="order by">
             <isNotEmpty property="filed">
                       $filed$ $sort$
             </isNotEmpty>
         </dynamic>
	  </select> 
	  <!-- 查询字典总的记录条数 -->
	   <select id="selectDicAllcount" parameterClass="dic" resultClass="java.lang.Integer">   
		  select count(*) from sys_dictionary  where 1=1
		   <dynamic prepend="and">
             <isNotEmpty property="id">
                      (id=#id# or pid=#id#)
             </isNotEmpty>
         </dynamic>
	  </select>  
	    <!-- 根据id查询字典对象 -->
	   <select id="selectdictionarybyid" parameterClass="java.lang.String" resultClass="com.audit.entity.Dictionary">   
		  select * from  sys_dictionary where id = #id#   
	   </select>
	   
	     <!-- 根据name查询字典对象 -->
	   <select id="selectdictionarybyName" parameterClass="java.lang.String" resultClass="com.audit.entity.Dictionary">   
		  select top(1)* from  sys_dictionary where dictionaryname = #dictionaryname#   
	   </select>
	   <!-- 查询id最大值 -->
	   <select id="selectdicmaxid" resultClass="java.lang.Integer">   
	  <![CDATA[   
	  select max(SUBSTRING (id,2,len(id))) from  sys_dictionary
	  ]]>   
	  </select> 
	  <!-- 增加字典 -->
	  <insert id="adddic"  parameterClass="dic">
           insert into sys_dictionary(id,dictionaryname,pid,issystem,remark) 
           values
           (#id#,#dictionaryname#,#pid#,#issystem#,#remark#)	  
	  </insert>
	  
	  <!-- updatedic修改字典 -->
	  <update id="updatedic"  parameterClass="com.audit.entity.Dictionary">
           update sys_dictionary set
           dictionaryname=#dictionaryname#,	
           pid=#pid#,
           issystem=#issystem#,
           remark=#remark#
           where id=#id#  
	 </update>
	 <!-- 删除字典 -->
	 <delete id="deletedic" parameterClass="java.lang.String">
	       delete from sys_dictionary where id=#id#
	 </delete>
	 <!-- 查询用户性别关联的字典信息 -->
	 <select id="findusersexdic" parameterClass="java.lang.String" resultClass="com.audit.entity.EditUser">
	     select id from sys_userinfo where  sex=#id#
	 
	 </select>
	 <!-- 修改用户性别关联的字典 -->
	 <update id="updateusersexdic"  parameterClass="java.lang.String">
	      update sys_userinfo set sex='' where id=#id#
	 
	 </update>
	  <!-- 查询用户资质关联的字典信息 -->
	 <select id="findusertypedic" parameterClass="java.lang.String" resultClass="com.audit.entity.EditUser">
	     select id from sys_userinfo where  qualification=#id#
	 
	 </select>
	 <!-- 修改用户性别关联的字典 -->
	 <update id="updateusertypedic"  parameterClass="java.lang.String">
	      update sys_userinfo set qualification='' where id=#id#
	 
	 </update>
</sqlMap>

