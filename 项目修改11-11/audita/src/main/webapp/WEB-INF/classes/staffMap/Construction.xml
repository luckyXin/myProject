<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE sqlMap 
    PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Constructionxml">

   <typeAlias alias="construction" type="com.audit.entity.staff.Construction"/>
     <!-- 分页查询的动态sql -->
	  <select id="selectConstructionpage" parameterClass="construction" resultClass="construction">   
	   
	     select * from sys_construction where 1=1 
	     
	      <dynamic prepend="and">
             <isNotEmpty property="constructname">
                       constructname like '%$constructname$%'
             </isNotEmpty>
         </dynamic>
         <dynamic prepend="and">
             <isNotEmpty property="state">
                       state = #state#
             </isNotEmpty>
         </dynamic>
	    <dynamic prepend="order by">
             <isNotEmpty property="filed">
                       $filed$ $sort$
             </isNotEmpty>
         </dynamic>
	  </select> 
	  <!-- 查询总的记录条数 -->
	   <select id="selectconstructcount" parameterClass="construction" resultClass="java.lang.Integer">   
		  select count(*) from sys_construction  where 1=1
		   <dynamic prepend="and">
	             <isNotEmpty property="constructname">
	                       constructname like '%$constructname$%'
	             </isNotEmpty>
	         </dynamic>
	          <dynamic prepend="and">
             <isNotEmpty property="state">
                       state = #state#
             </isNotEmpty>
         </dynamic>
	  </select>    
	  <!-- 根据id查询施工企业对象 -->
	   <select id="getConstructById" parameterClass="java.lang.String" resultClass="construction">   
	        select * from  sys_construction where id = #id#   
	  </select>
	   <!-- 查询id最大值 -->
	   <select id="selectconstructmaxid" resultClass="java.lang.Integer">   
	  select max(SUBSTRING (id,3,len(id))) from  sys_construction
	  </select> 
	  <!-- 增加施工企业 -->
	  <insert id="addconstruction"  parameterClass="construction">
           insert into sys_construction(id,constructname,deptreferred,enterprisetype,deptcode,regaddress,regfunds,legal,deptqualifica,email,address,ischose,state,remark) 
           values
           (#id#,#constructname#,#deptreferred#,#enterprisetype#,#deptcode#,#regaddress#,#regfunds#,#legal#,#deptqualifica#,#email#,#address#,#ischose#,#state#,#remark#)	  
	  </insert>
	  <!-- 修改施工企业 -->
	  <update id="updateconstruction" parameterClass="construction">
	        update sys_construction set
	        constructname=#constructname#,
	        deptreferred=#deptreferred#,
	        enterprisetype=#enterprisetype#,
	        deptcode=#deptcode#,
	        regaddress=#regaddress#,
	        regfunds=#regfunds#,
	        legal=#legal#,
	        deptqualifica=#deptqualifica#,
	        email=#email#,
	        address=#address#,
	        ischose=#ischose#,
	        state=#state#,
	        remark=#remark#
            where id=#id#	        
	  </update>
         <!-- 注销施工企业 -->
	  <update id="destoryconstruction" parameterClass="construction">
	        update sys_construction set state=#state# where id=#id#	        
	  </update> 
	  <!-- 删除施工企业 --> 
	  <delete id="deleteconstruction" parameterClass="construction">
	       update sys_construction set state=#state# where id=#id#	  
	  </delete>
</sqlMap>

